{"version":3,"sources":["webpack:///./src/views/PlayerQueue.vue?7c8a","webpack:///src/views/PlayerQueue.vue","webpack:///./src/views/PlayerQueue.vue?86d4","webpack:///./src/views/PlayerQueue.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","model","value","callback","$$v","activeTab","expression","_v","_s","$t","next_items","length","attrs","staticClass","scopedSlots","_u","key","fn","ref","item","media_type","$store","isMobile","on","itemClicked","menuClick","previous_items","staticRenderFns","components","ListviewItem","props","data","selected","items","computed","$server","activePlayer","slice","cur_queue_index","created","windowtitle","getItems","$on","queueUpdatedMsg","beforeDestroy","$off","methods","url","item_id","$emit","$router","push","msgDetails","activePlayerId","component","VList","VTab","VTabItem","VTabs"],"mappings":"oHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,UAAU,CAACA,EAAG,SAAS,CAACE,MAAM,CAACC,MAAOP,EAAa,UAAEQ,SAAS,SAAUC,GAAMT,EAAIU,UAAUD,GAAKE,WAAW,cAAc,CAACP,EAAG,QAAQ,CAACJ,EAAIY,GAAG,IAAIZ,EAAIa,GAAGb,EAAIc,GAAG,qBAAuB,KAAOd,EAAIe,WAAWC,OAAS,QAAQZ,EAAG,aAAa,CAACA,EAAG,SAAS,CAACa,MAAM,CAAC,WAAW,KAAK,CAACb,EAAG,kBAAkB,CAACc,YAAY,WAAWD,MAAM,CAAC,MAAQjB,EAAIe,WAAW,YAAY,GAAG,YAAY,gBAAgB,YAAY,IAAII,YAAYnB,EAAIoB,GAAG,CAAC,CAACC,IAAI,UAAUC,GAAG,SAASC,GAC5iB,IAAIC,EAAOD,EAAIC,KACf,MAAO,CAACpB,EAAG,eAAe,CAACa,MAAM,CAAC,KAAOO,EAAK,WAAgC,GAAnBA,EAAKC,YAAkBzB,EAAI0B,OAAOC,SAAiB,cAAe,EAAK,cAAgB3B,EAAI0B,OAAOC,SAAS,YAAc3B,EAAI0B,OAAOC,SAAS,SAAW3B,EAAI0B,OAAOC,UAAUC,GAAG,CAAC,MAAQ5B,EAAI6B,YAAY,UAAY7B,EAAI8B,qBAAqB,IAAI,GAAG1B,EAAG,QAAQ,CAACJ,EAAIY,GAAG,IAAIZ,EAAIa,GAAGb,EAAIc,GAAG,yBAA2B,KAAOd,EAAI+B,eAAef,OAAS,QAAQZ,EAAG,aAAa,CAACA,EAAG,SAAS,CAACa,MAAM,CAAC,WAAW,KAAK,CAACb,EAAG,kBAAkB,CAACc,YAAY,WAAWD,MAAM,CAAC,MAAQjB,EAAI+B,eAAe,YAAY,GAAG,YAAY,gBAAgB,YAAY,IAAIZ,YAAYnB,EAAIoB,GAAG,CAAC,CAACC,IAAI,UAAUC,GAAG,SAASC,GAC1oB,IAAIC,EAAOD,EAAIC,KACf,MAAO,CAACpB,EAAG,eAAe,CAACa,MAAM,CAAC,KAAOO,EAAK,WAAgC,GAAnBA,EAAKC,YAAkBzB,EAAI0B,OAAOC,SAAiB,cAAe,EAAK,cAAgB3B,EAAI0B,OAAOC,SAAS,YAAc3B,EAAI0B,OAAOC,SAAS,SAAW3B,EAAI0B,OAAOC,UAAUC,GAAG,CAAC,MAAQ5B,EAAI6B,YAAY,UAAY7B,EAAI8B,qBAAqB,IAAI,IAAI,IAAI,IACjTE,EAAkB,G,sHCsDtB,GACEC,WAAY,CACVC,aAAJ,QAEEC,MAAO,GACPC,KALF,WAMI,MAAO,CACLC,SAAU,CAAC,GACXC,MAAO,KAGXC,SAAU,CACRxB,WADJ,WAEM,OAAId,KAAKqC,OAASrC,KAAKuC,QAAQC,aACtBxC,KAAKqC,MAAMI,MAAMzC,KAAKuC,QAAQC,aAAaE,iBAC1D,IAEIZ,eANJ,WAOM,OAAI9B,KAAKqC,OAASrC,KAAKuC,QAAQC,aACtBxC,KAAKqC,MAAMI,MAAM,EAAGzC,KAAKuC,QAAQC,aAAaE,iBAC7D,KAGEC,QAvBF,WAwBI3C,KAAKyB,OAAOmB,YAAc5C,KAAKa,GAAG,SAC9Bb,KAAKuC,QAAQC,cACfxC,KAAK6C,WAEP7C,KAAKuC,QAAQO,IAAI,gBAAiB9C,KAAK+C,iBACvC/C,KAAKuC,QAAQO,IAAI,sBAAuB9C,KAAK+C,kBAE/CC,cA/BF,WAgCIhD,KAAKuC,QAAQU,KAAK,iBAClBjD,KAAKuC,QAAQU,KAAK,wBAEpBC,QAAS,CACPtB,YADJ,SACA,GAEM,IAAN,KACM,GAAwB,IAApBL,EAAKC,WACP2B,EAAM,YAAc5B,EAAK6B,aACjC,oBACQD,EAAM,WAAa5B,EAAK6B,YAChC,qBAKQ,YADApD,KAAKuC,QAAQc,MAAM,kBAAmB9B,GAHtC4B,EAAM,cAAgB5B,EAAK6B,QAM7BpD,KAAKsD,QAAQC,KAAK,CAAxB,sCAEI1B,UAjBJ,SAiBA,GAEM7B,KAAKuC,QAAQc,MAAM,kBAAmB9B,IAExCwB,gBArBJ,SAqBA,GAEUS,IAAexD,KAAKuC,QAAQkB,gBAC9BzD,KAAK6C,YAGT,SA3BJ,iLA6BA,IACA,KACA,IACA,kDAhCA,uBAkCA,2CAlCA,UAkCA,EAlCA,OAmCA,gBAnCA,qDAoCA,IApCA,6BAoCA,6DACA,qBACA,2BACA,mBACA,KAxCA,gPA0CA,OACA,YA3CA,4EA8CA,sBACA,oCA/CA,uIC9FqY,I,iFCOjYa,EAAY,eACd,EACA5D,EACAiC,GACA,EACA,KACA,KACA,MAIa,aAAA2B,EAAiB,QAQhC,IAAkBA,EAAW,CAACC,QAAA,KAAMC,OAAA,KAAKC,WAAA,KAASC,QAAA","file":"js/playerqueue.39a08978.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',[_c('v-tabs',{model:{value:(_vm.activeTab),callback:function ($$v) {_vm.activeTab=$$v},expression:\"activeTab\"}},[_c('v-tab',[_vm._v(\" \"+_vm._s(_vm.$t('queue_next_tracks') + ' (' + _vm.next_items.length + ')'))]),_c('v-tab-item',[_c('v-list',{attrs:{\"two-line\":\"\"}},[_c('RecycleScroller',{staticClass:\"scroller\",attrs:{\"items\":_vm.next_items,\"item-size\":72,\"key-field\":\"queue_item_id\",\"page-mode\":\"\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('ListviewItem',{attrs:{\"item\":item,\"hideavatar\":item.media_type == 3 ? _vm.$store.isMobile : false,\"hidetracknum\":true,\"hideproviders\":_vm.$store.isMobile,\"hidelibrary\":_vm.$store.isMobile,\"hidemenu\":_vm.$store.isMobile},on:{\"click\":_vm.itemClicked,\"menuClick\":_vm.menuClick}})]}}])})],1)],1),_c('v-tab',[_vm._v(\" \"+_vm._s(_vm.$t('queue_previous_tracks') + ' (' + _vm.previous_items.length + ')'))]),_c('v-tab-item',[_c('v-list',{attrs:{\"two-line\":\"\"}},[_c('RecycleScroller',{staticClass:\"scroller\",attrs:{\"items\":_vm.previous_items,\"item-size\":72,\"key-field\":\"queue_item_id\",\"page-mode\":\"\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('ListviewItem',{attrs:{\"item\":item,\"hideavatar\":item.media_type == 3 ? _vm.$store.isMobile : false,\"hidetracknum\":true,\"hideproviders\":_vm.$store.isMobile,\"hidelibrary\":_vm.$store.isMobile,\"hidemenu\":_vm.$store.isMobile},on:{\"click\":_vm.itemClicked,\"menuClick\":_vm.menuClick}})]}}])})],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <section>\n    <v-tabs v-model=\"activeTab\">\n      <v-tab> {{ $t('queue_next_tracks') + ' (' + next_items.length + ')' }}</v-tab>\n      <v-tab-item>\n      <v-list two-line>\n        <RecycleScroller\n          class=\"scroller\"\n          :items=\"next_items\"\n          :item-size=\"72\"\n          key-field=\"queue_item_id\"\n          v-slot=\"{ item }\"\n          page-mode\n        >\n          <ListviewItem\n            v-bind:item=\"item\"\n            :hideavatar=\"item.media_type == 3 ? $store.isMobile : false\"\n            :hidetracknum=\"true\"\n            :hideproviders=\"$store.isMobile\"\n            :hidelibrary=\"$store.isMobile\"\n            :hidemenu=\"$store.isMobile\"\n            v-on:click=\"itemClicked\"\n            v-on:menuClick=\"menuClick\"\n          ></ListviewItem>\n        </RecycleScroller>\n      </v-list>\n      </v-tab-item>\n      <v-tab> {{ $t('queue_previous_tracks') + ' (' + previous_items.length + ')' }}</v-tab>\n      <v-tab-item>\n      <v-list two-line>\n        <RecycleScroller\n          class=\"scroller\"\n          :items=\"previous_items\"\n          :item-size=\"72\"\n          key-field=\"queue_item_id\"\n          v-slot=\"{ item }\"\n          page-mode\n        >\n          <ListviewItem\n            v-bind:item=\"item\"\n            :hideavatar=\"item.media_type == 3 ? $store.isMobile : false\"\n            :hidetracknum=\"true\"\n            :hideproviders=\"$store.isMobile\"\n            :hidelibrary=\"$store.isMobile\"\n            :hidemenu=\"$store.isMobile\"\n            v-on:click=\"itemClicked\"\n            v-on:menuClick=\"menuClick\"\n          ></ListviewItem>\n        </RecycleScroller>\n      </v-list>\n      </v-tab-item>\n    </v-tabs>\n  </section>\n</template>\n\n<script>\nimport Vue from 'vue'\nimport ListviewItem from '@/components/ListviewItem.vue'\n\nexport default {\n  components: {\n    ListviewItem\n  },\n  props: {},\n  data () {\n    return {\n      selected: [2],\n      items: []\n    }\n  },\n  computed: {\n    next_items () {\n      if (this.items && this.$server.activePlayer) {\n        return this.items.slice(this.$server.activePlayer.cur_queue_index)\n      } else return []\n    },\n    previous_items () {\n      if (this.items && this.$server.activePlayer) {\n        return this.items.slice(0, this.$server.activePlayer.cur_queue_index)\n      } else return []\n    }\n  },\n  created () {\n    this.$store.windowtitle = this.$t('queue')\n    if (this.$server.activePlayer) {\n      this.getItems()\n    }\n    this.$server.$on('queue updated', this.queueUpdatedMsg)\n    this.$server.$on('new player selected', this.queueUpdatedMsg)\n  },\n  beforeDestroy () {\n    this.$server.$off('queue updated')\n    this.$server.$off('new player selected')\n  },\n  methods: {\n    itemClicked (item) {\n      // item in the list is clicked\n      let url = ''\n      if (item.media_type === 1) {\n        url = '/artists/' + item.item_id\n      } else if (item.media_type === 2) {\n        url = '/albums/' + item.item_id\n      } else if (item.media_type === 4) {\n        url = '/playlists/' + item.item_id\n      } else {\n        // assume track (or radio) item\n        this.$server.$emit('showContextMenu', item)\n        return\n      }\n      this.$router.push({ path: url, query: { provider: item.provider } })\n    },\n    menuClick (item) {\n      // contextmenu button clicked\n      this.$server.$emit('showContextMenu', item)\n    },\n    queueUpdatedMsg (msgDetails) {\n      // got queue updated event\n      if (msgDetails === this.$server.activePlayerId) {\n        this.getItems()\n      }\n    },\n    async getItems () {\n      // retrieve the queue items\n      var offset = 0\n      var limit = 50\n      var index = 0\n      const endpoint = 'players/' + this.$server.activePlayerId + '/queue'\n      while (true) {\n        let items = await this.$server.getData(endpoint, { offset: offset, limit: limit })\n        if (!items || items.length === 0) break\n        for (var item of items) {\n          if (this.items.length >= index) {\n            Vue.set(this.items, index, item)\n          } else this.items.push(item)\n          index += 1\n        }\n        offset += limit\n        if (items.length < limit) break\n      }\n      // truncate list if needed\n      if (this.items.length > index) {\n        this.items = this.items.slice(0, index + 1)\n      }\n    }\n  }\n}\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlayerQueue.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/vuetify-loader/lib/loader.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlayerQueue.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PlayerQueue.vue?vue&type=template&id=76db21fc&\"\nimport script from \"./PlayerQueue.vue?vue&type=script&lang=js&\"\nexport * from \"./PlayerQueue.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VList } from 'vuetify/lib/components/VList';\nimport { VTab } from 'vuetify/lib/components/VTabs';\nimport { VTabItem } from 'vuetify/lib/components/VTabs';\nimport { VTabs } from 'vuetify/lib/components/VTabs';\ninstallComponents(component, {VList,VTab,VTabItem,VTabs})\n"],"sourceRoot":""}